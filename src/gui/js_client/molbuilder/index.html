
<!-- * preambule -->

<!doctype html>
<html>
    <head>
        <title>MolBuilder - YAACS</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8">
        
        <!-- ** external libs -->
        <link href="/css-libs/semantic.min.css" Rel="stylesheet">
        <link href="/css-libs/cytoscape-context-menus.css" rel="stylesheet">


        
	      <!-- ** external js -->
        <script src="/js-libs/jquery-3.3.1.min.js"></script>
        <script src="/js-libs/knockout-3.4.2.debug.js"></script>
        <script src="/js-libs/semantic.min.js"></script>
        <script src="/js-libs/cytoscape.min.js"></script>
        <script src="/js-libs/cytoscape-cose-bilkent.js"></script>
        <script src="/js-libs/cola.v3.min.js"></script>
        <script src="/js-libs/cytoscape-cola.js"></script>

        <script src="/js-libs/cytoscape-context-menus.js"></script>
        <script src="/js-libs/cytoscape-automove.js"></script>

        <!-- ** personnal css -->
        <link href="/custom_styles.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        
    </head>
    
    <!-- * body -->

    <body>
        
        
        <!-- ** tab switch -->
        <div class="ui container"
             data-bind="with:molbuilderVM">
            
            <div class="ui top fixed menu">
                <a class="item" href="/simulator">Simulator</a>
                <a class="item" href="/sandbox">Sandbox</a>
                <a class="active item">Molbuilder</a>
            </div>
            
            <div class="ui grid" id="main_vue">
                
                <div class="centered row">
                    <h1 class="ui header" style="margin-top:5px">Mol Builder</h1>
                </div>
                
                <div class="row">
                    <cytoscape-vue :pnet="pnet" inline-template>
	                      <div class="six wide column">
	                          <h4 class="ui horizontal divider header">
	                              Petri Net view
	                          </h4>
	                          <div id="molbuilder_pnet_cy"  class="cy small"></div>
	                      </div>
                    </cytoscape-vue>

                    <acid-selection-vue inline-template>
	                      <div class="four wide column tooltip">
                            
	                          <h4 class="ui horizontal divider header">
	                              Acids
	                          </h4>
                            
	                          <span class="big tooltiptext">
	                              Select an acid to add it to the proteine.<br>
	                              The text should form a comma separated list, for example : <br>
	                              <span class="special-text">
		                                [ <br>
		                                ["Node"], <br>
		                                ["InputArc","A",["Regular_iarc"]], <br>
		                                ["Node"], <br>
		                                ["OutputArc","A",["Regular_oarc"]] <br>
		                                ]<br>
	                              </span>
	                              (linebreaks don't matter)
	                          </span>
	                          <div class="ui segments">
	                              <div v-for="acid_type in acid_examples" class="ui segment" >
                                   {{acid_type.type}} 
	                                  <div class="ui vertical buttons">
		                                    <button v-for="acid in acid_type.acids" v-on:click="send_acid(acid)" class="ui button" >
                                            {{JSON.stringify(acid) }}
                                        </button>
	                                  </div>
                                </div> 
	                          </div>
	                      </div>
                    </acid-selection-vue>
                    <prot-vue :prot="prot" inline-template>
	                      <div class="six wide column">
	                          <h4 class="ui horizontal divider header">
	                              Proteine
	                          </h4>
	                          <div class="ui buttons">
	                              <button class="ui button tooltip" v-on:click="compile">
		                                Compile prot
		                                <span class="tooltiptext">Calculates associated Petri Net and Molecule</span>
	                              </button>
	                              <button class="ui button tooltip" v-on:click="restore" >
		                                Restore prot
		                                <span class="tooltiptext">Revert changes</span>
	                              </button>
	                              <button class="ui button tooltip">
		                                Send to Sandbox
		                                <span class="tooltiptext">Add to the sandbox (compile before using this)</span>
	                              </button>
	                          </div>
	                          <div class="ui form">
	                              <div class="field">
		                                <textarea style="resize : both"
			                                        rows="25"
                                              v-model="prot"
			                                        id="molbuilder_prot_text"></textarea>
	                              </div>
	                          </div>
	                      </div>
                    </prot-vue>
	              </div>
	              <div class="row">
                    <mol-vue :mol="mol" inline-template>
	                      <div class="eight wide column">
	                          <h4 class="ui horizontal divider header">
	                              Molecule
	                          </h4>
	                          <div class="ui buttons">
	                              <button class="ui button tooltip"  v-on:click="compile" >
		                                Compile mol
		                                <span class="tooltiptext">Calculates associated Proteine and Petri Net</span>
	                              </button>
	                              <button class="ui button tooltip" v-on:click="restore" >
		                                Restore mol
		                                <span class="tooltiptext">Revert changes</span>
	                              </button>
	                              <button class="ui button tooltip">
		                                Send to Sandbox
		                                <span class="tooltiptext">Add the current molecule to the sandbox</span>
	                              </button>
	                          </div>
	                          <div class="ui form">
	                              <div class="field">
		                                <textarea style="resize : both"
			                                        rows="15"
                                              v-model="mol"
			                                        id="molbuilder_prot_text"></textarea>
	                              </div>
	                          </div>
	                      </div>
                    </mol-vue>
	              </div>
            </div>
        </div>

    </body>


    <!-- ** scripts loading  -->
    <script src="/js-libs/FileSaver.min.js"> </script>
    <script src="/utils.js"> </script>
    <script src="/pnet_cytoscape.js"> </script>
    <script src="molbuilder_vue.js"> </script>
</html>
